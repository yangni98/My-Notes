## 面试题

#### redis中 的set和list 数据类型

+ set中的数据具有唯一性 ，list中的数据不具有唯一性
+ set中的数据无序，list中的数据有序
+ set中的数据类型可以进行数学集合运算，list不可以
+ list数据类型都是通过索引下表实现有序



#### redis中的持久化  RDB、AOF

RDB： Redis DataBase

在指定的时间间隔内将内存中的数据集快照写入磁盘，实际操作过程就是fork一个子进程。先将数据集写入临时文件，写入成功之后，再替换之前的文件，用二进制压缩存储

优点： 

1.整个Redis数据库将包含一个文件 dump.rdb 方便持久化

2.容灾性好，方便备份

3.性能最大化，fork子进程来完成操作，让主进程继续处理命令，所以是IO最大化，使用单独子进程来进行持久化，主进程不会进行任何IO操作，保证了redis的高性能。

缺点：

1.数据安全性低，RDB是间隔一段时间进行持久化，如果持久化之间redis发生故障，会发生数据丢失，所以这种方式更合适数据要求不严谨的时候。

2.由于RDB是通过fork子进程来协作完成数据持久化工作，因此如果当数据集较大时，可能会导致整个服务器停止几百毫秒 甚至是1秒。

 

+ AOF是以日志形式，将内存中的数据整体拷贝到硬盘上，存储格式复杂
+ 对业务数据敏感的应用场景选用AOF持久化机制
+ 追求**大数据集**恢复速度的应用场景选用RDB持久化机制
+ **AOF**持久化机制比RDB持久化机制的**存储速度快**
+ **AOF**持久化机制比RDB持久化机制的**恢复速度慢**
+ Redis的**默认**采用**AOF**持久化机制





#### redis 选择单线程的原因

+  避免线程切换和竞争产生的消耗
+ 避免同步机制的开销
+ 实现简单，底层数据结构的设计无需考虑线程安全
+ 6.0版本引入了多线程的目的是解决Redis在网络上I/o的性能瓶颈
+ 



#### reids主从复制

+ 可以通过**配置文件、启动命令、客户端命令**三种方式开启主从复制
+ 主从复制的开启是在从节点发起
+ slaveof no one命令可以用于断开主从复制关系
+ 从节点断开主从复制关系后，不会删除已有的数据，只是不再接受主节点新的数据变化

+  实现原理： 从节点服务器中的masterhost和masterport字段，分别存储主节点的ip和port信息